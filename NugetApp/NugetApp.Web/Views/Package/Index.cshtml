@model NugetApp.Web.Models.PackageModels.PackageViewModel

@{
    ViewBag.Title = "Packages";
}

<h2>Packages</h2>



<div class="container">

    @*<div class="row">
            <input type="text" style="float: right;
            padding: 8px;
            border: inset;
            border-width: 2px 2px;
            margin-top: 8px;
            margin-right: 16px;
            font-size: 17px;" placeholder="Search..">
        </div>*@

    <!-- Search form -->
    @*@Html.BeginForm("SearchPackage", "Package", FormMethod.Post)
        <div class="md-form mt-0">
            @Html.TextBoxFor(m => m.SearchText, new { @class = "form-control" })
            <input name="q" class="form-control" type="text" placeholder="Search Packages..." aria-label="Search">
            <button class="btn btn-primary">Search</button>
        </div>
        <br>

        <div class="input-group md-form form-sm form-2 pl-0">
            <input class="form-control my-0 py-1 amber-border" type="text" placeholder="Search" aria-label="Search">
            <div class="input-group-append">
                <span class="input-group-text amber lighten-3" id="basic-text1">
                    <i class="fas fa-search text-grey"
                       aria-hidden="true"></i>
                </span>
            </div>
        </div>*@

    <!--<form aria-label="Package search bar" class="col-sm-12" action="/package" method="get">
        <div class="input-group">
            <input name="q" type="text" class="form-control" id="search" aria-label="Enter packages to search" placeholder="Search for packages..." autocomplete="off" value="">
            <span class="input-group-btn">
                <button class="btn btn-default btn-warning btn-search" type="submit" title="Search for packages" aria-label="Search">
                    <span class="ms-Icon ms-Icon--Search" aria-hidden="true"></span>
                </button>
            </span>
        </div>
        <div id="autocomplete-results-container" class="text-left" tabindex="0"></div>-->
    <!--<script type="text/html" id="autocomplete-results-row">-->
    <!-- ko if: $data -->
    <!-- ko if: $data.PackageRegistration -->
    <!--<div class="col-sm-4 autocomplete-row-id autocomplete-row-data">
        <span data-bind="attr: { id: 'autocomplete-result-id-' + $data.PackageRegistration.Id, title: $data.PackageRegistration.Id }, text: $data.PackageRegistration.Id"></span>
    </div>
    <div class="col-sm-4 autocomplete-row-downloadcount text-right autocomplete-row-data">
        <span data-bind="text: $data.DownloadCount + ' downloads'"></span>
    </div>
    <div class="col-sm-4 autocomplete-row-owners text-left autocomplete-row-data">
        <span data-bind="text: $data.OwnersString + ' '"></span>
    </div>-->
    <!-- /ko -->
    <!-- ko ifnot: $data.PackageRegistration -->
    <!--<div class="col-sm-12 autocomplete-row-id autocomplete-row-data">
        <span data-bind="attr: { id: 'autocomplete-result-id-' + $data, title: $data  }, text: $data"></span>
    </div>-->
    <!-- /ko -->
    <!-- /ko -->
    <!--</script>

    <script type="text/html" id="autocomplete-results-template">-->
    <!-- ko if: $data.data.length > 0 -->
    <!--<div data-bind="foreach: $data.data" id="autocomplete-results-list">
        <a data-bind="attr: { id: 'autocomplete-result-row-' + $data, href: '/packages/' + $data, title: $data }" tabindex="-1">
            <div data-bind="attr:{ id: 'autocomplete-container-' + $data }" class="autocomplete-results-row">
            </div>
        </a>
    </div>-->
    <!-- /ko -->
    <!--</script>-->
    <!--</form>-->

    <ul class="list-group list-group-flush">
        @for (int i = 0; i < Model.Packages.Count; i++)
        {
            <li class="list-group-item">
                <article class="package" role="listitem">

                    <div class="row">
                        <div class="col-sm-1 hidden-xs hidden-sm col-package-icon">
                            <img class="package-icon img-responsive" aria-hidden="true" alt="" src="https://api.nuget.org/v3-flatcontainer/newtonsoft.json/12.0.3/icon" onerror="this.src='https://www.nuget.org/Content/gallery/img/default-package-icon-256x256.png'; this.onerror = null;">
                        </div>
                        <div class="col-sm-11">
                            <div class="package-header">
                                <h3>
                                    <a href="~/Package/Details/@Model.Packages[i].Id">@Model.Packages[i].PackageName</a>
                                    <img class="reserved-indicator" src="/Content/gallery/img/reserved-indicator.svg" onerror="this.src='https://www.nuget.org/Content/gallery/img/reserved-indicator-20x20.png'; this.onerror = null;" title="The ID prefix of this package has been reserved for one of the owners of this package by NuGet.org.">
                                </h3>



                                <span class="package-by">
                                    Uploaded By: @Model.Packages[i].ApplicationUser.Email
                                </span>
                            </div>
                            @*Newtonsoft.<wbr>Json*@
                            <ul class="package-list">
                                <li>
                                    <span class="icon-text">
                                        <i class="ms-Icon ms-Icon--Download" aria-hidden="true"></i>
                                        @Model.Packages[i].TotalDowloadCount total downloads
                                    </span>
                                </li>
                                <li>
                                    <span class="icon-text">
                                        <i class="ms-Icon ms-Icon--History" aria-hidden="true"></i>
                                        last updated <span data-datetime="@Model.Packages[i].LastUpdatedAt.ToString("d")" title="@Model.Packages[i].LastUpdatedAt.ToString("d")">@Model.Packages[i].LastUpdatedAt.ToString("d")</span>
                                    </span>
                                </li>
                                <li>
                                    <span class="icon-text">
                                        <i class="ms-Icon ms-Icon--Flag" aria-hidden="true"></i>
                                        Latest version: <span class="text-nowrap">@Model.Packages[i].LastPackageVersion</span>
                                    </span>
                                </li>
                            </ul>

                            <div class="package-details">
                                @Model.Packages[i].Description
                            </div>
                        </div>
                    </div>
                </article>

            </li>
        }
    </ul>

</div>